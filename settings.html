<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings – Campus Marketplace</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body class="bg-white text-gray-800 font-sans">

<!-- Navbar -->
<nav class="sticky top-0 z-50 bg-white/80 backdrop-blur-md shadow-md flex items-center justify-between px-6 md:px-12 py-4 transition-all duration-500 hover:shadow-xl">
  <a href="index.html" class="text-xl font-bold text-indigo-600 bg-gradient-to-r from-indigo-500 to-purple-500 bg-clip-text text-transparent hover:scale-110 transition-transform duration-300">
    Campus Marketplace
  </a>

  <div class="hidden md:flex items-center space-x-6">
    <a href="index.html" class="font-semibold text-gray-700 hover:text-indigo-600">Home</a>
    <a href="sell.html" class="font-semibold text-gray-700 hover:text-indigo-600">Sell Item</a>
    <div class="relative">
      <img id="profile-btn" src="" alt="Profile"
           class="w-10 h-10 rounded-full cursor-pointer shadow-sm hover:shadow-lg transition transform hover:scale-110">
      <div id="profile-menu" class="hidden absolute right-0 mt-2 w-44 bg-white shadow-lg rounded-lg overflow-hidden z-20 transition-all duration-300">
        <div class="px-4 py-2 text-gray-800 font-semibold" id="profile-name"></div>
        <a href="profile.html" class="block px-4 py-2 text-gray-700 hover:bg-indigo-50 transition">Profile</a>
        <a href="settings.html" class="block px-4 py-2 text-gray-700 hover:bg-indigo-50 transition">Settings</a>
        <a href="login.html" class="block px-4 py-2 text-gray-700 hover:bg-indigo-50 transition" onclick="logout()">Logout</a>
      </div>
    </div>
  </div>

  <button id="menu-btn" class="md:hidden text-gray-700 focus:outline-none transition transform hover:scale-110 hover:text-indigo-600 duration-300">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
         viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"/>
    </svg>
  </button>
</nav>

<!-- Mobile Menu -->
<div id="mobile-menu" class="hidden flex-col space-y-2 bg-white shadow px-6 py-4 md:hidden">
  <a href="index.html" class="hover:text-indigo-600 font-semibold text-indigo-600">Home</a>
  <a href="sell.html" class="hover:text-indigo-600">Sell Item</a>
  <a href="profile.html" class="hover:text-indigo-600 flex items-center gap-2">
    <img id="mobile-profile-btn" src="" alt="Profile" class="w-8 h-8 rounded-full">
    Profile
  </a>
</div>

<!-- SETTINGS FORM -->
<main class="max-w-4xl mx-auto mt-12 px-6">
  <h1 class="text-3xl font-bold mb-6 text-center">Account Settings</h1>

  <form id="settings-form" class="bg-white shadow-md rounded-xl p-8 space-y-6">
    <div>
      <label class="block mb-1 font-semibold">Name</label>
      <input type="text" id="name" class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" />
    </div>

    <div>
      <label class="block mb-1 font-semibold">Email</label>
      <input type="email" id="email" class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" />
    </div>

    <div>
      <label class="block mb-1 font-semibold">Profile Avatar URL</label>
      <input type="url" id="avatar" class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" />
    </div>

    <div class="flex items-center justify-between">
      <label class="font-semibold">Enable Notifications</label>
      <input type="checkbox" id="notifications" class="w-5 h-5 rounded border-gray-300 focus:ring-indigo-500"/>
    </div>

    <div class="flex items-center justify-between">
      <label class="font-semibold">Dark Mode</label>
      <input type="checkbox" id="darkmode" class="w-5 h-5 rounded border-gray-300 focus:ring-indigo-500"/>
    </div>

    <button type="submit" class="bg-indigo-600 text-white px-6 py-3 rounded-lg shadow hover:bg-indigo-700 hover:scale-105 transition transform w-full">
      Save Changes
    </button>
  </form>
</main>

<!-- Footer -->
<footer class="bg-white border-t text-center py-8 text-gray-600 mt-12">
  <p>© 2025 Campus Marketplace. All Rights Reserved.</p>
</footer>

<script>
  // Mobile menu toggle
  const menuBtn = document.getElementById('menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  menuBtn.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));

  // Load logged-in user
  const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser')) || {
    name: "Your Name",
    email: "user@chitkara.edu.in",
    avatar: "https://i.pravatar.cc/150?img=47",
    notifications: true,
    darkmode: false
  };

  // Fill navbar & form fields
  const profileBtn = document.getElementById('profile-btn');
  const profileName = document.getElementById('profile-name');
  const mobileProfileBtn = document.getElementById('mobile-profile-btn');

  profileBtn.src = loggedInUser.avatar;
  profileBtn.alt = loggedInUser.name;
  if(profileName) profileName.textContent = loggedInUser.name;
  if(mobileProfileBtn){
    mobileProfileBtn.src = loggedInUser.avatar;
    mobileProfileBtn.alt = loggedInUser.name;
  }

  // Prefill form
  document.getElementById('name').value = loggedInUser.name;
  document.getElementById('email').value = loggedInUser.email;
  document.getElementById('avatar').value = loggedInUser.avatar;
  document.getElementById('notifications').checked = loggedInUser.notifications;
  document.getElementById('darkmode').checked = loggedInUser.darkmode;

  // Dark mode toggle
  if(loggedInUser.darkmode) document.body.classList.add('bg-gray-900','text-gray-100');

  // Save form
  const settingsForm = document.getElementById('settings-form');
  settingsForm.addEventListener('submit', e => {
    e.preventDefault();
    const updatedUser = {
      name: document.getElementById('name').value,
      email: document.getElementById('email').value,
      avatar: document.getElementById('avatar').value,
      notifications: document.getElementById('notifications').checked,
      darkmode: document.getElementById('darkmode').checked
    };
    localStorage.setItem('loggedInUser', JSON.stringify(updatedUser));
    alert('Settings saved!');

    // Update navbar immediately
    profileBtn.src = updatedUser.avatar;
    profileBtn.alt = updatedUser.name;
    if(profileName) profileName.textContent = updatedUser.name;
    if(mobileProfileBtn){
      mobileProfileBtn.src = updatedUser.avatar;
      mobileProfileBtn.alt = updatedUser.name;
    }

    // Apply dark mode
    if(updatedUser.darkmode){
      document.body.classList.add('bg-gray-900','text-gray-100');
    } else {
      document.body.classList.remove('bg-gray-900','text-gray-100');
    }
  });

  // Profile dropdown toggle
  profileBtn.addEventListener('click', ()=> {
    document.getElementById('profile-menu').classList.toggle('hidden');
  });

  function logout(){
    localStorage.removeItem('loggedInUser');
    window.location.href = "login.html";
  }
</script>

</body>
</html>
