<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard â€“ Campus Marketplace</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="bg-gray-50 font-sans min-h-screen flex flex-col">

  <!-- ðŸŒˆ Navbar -->
  <header class="bg-gradient-to-r from-indigo-600 to-purple-600 shadow sticky top-0 z-50 text-white">
    <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
      <h1 class="text-xl font-bold flex items-center gap-2">
        <i data-lucide="layout-dashboard" class="w-6 h-6"></i>
        Campus Marketplace â€“ Admin
      </h1>
      <nav class="space-x-6">
        <a href="manage-users.html" class="hover:text-yellow-200">Users</a>
        <a href="admin-pickup.html" class="hover:text-yellow-200 font-medium">Pickup</a>
 
        <a href="approve-listing.html" class="hover:text-yellow-200">Approve</a>
        <button id="logoutBtn" class="text-red-200 hover:text-red-400">Logout</button>
      </nav>
    </div>
  </header>

  <!-- ðŸŒŸ Main Content -->
  <main class="flex-1 max-w-7xl mx-auto px-6 py-10">

    <!-- ðŸ“¢ Notice -->
    <div id="adminNotice" class="bg-indigo-50 border-l-4 border-indigo-500 text-indigo-700 p-4 rounded-lg mb-8">
      <p><strong>Notice:</strong> Welcome back, Admin! Monitoring system data...</p>
    </div>

    <!-- ðŸ“Š Stats -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-8">
      <div class="bg-white shadow-md rounded-xl p-6 flex items-center justify-between hover:scale-105 transition">
        <div>
          <h3 class="text-gray-500 text-sm">Total Users</h3>
          <p id="totalUsers" class="text-3xl font-bold text-gray-800">0</p>
        </div>
        <i data-lucide="users" class="w-8 h-8 text-indigo-500"></i>
      </div>
      <div class="bg-white shadow-md rounded-xl p-6 flex items-center justify-between hover:scale-105 transition">
        <div>
          <h3 class="text-gray-500 text-sm">Active Listings</h3>
          <p id="activeListings" class="text-3xl font-bold text-green-600">0</p>
        </div>
        <i data-lucide="shopping-bag" class="w-8 h-8 text-green-500"></i>
      </div>
      <div class="bg-white shadow-md rounded-xl p-6 flex items-center justify-between hover:scale-105 transition">
        <div>
          <h3 class="text-gray-500 text-sm">Pending Reports</h3>
          <p id="pendingReports" class="text-3xl font-bold text-orange-500">0</p>
        </div>
        <i data-lucide="alert-circle" class="w-8 h-8 text-orange-500"></i>
      </div>
      <div class="bg-white shadow-md rounded-xl p-6 flex items-center justify-between hover:scale-105 transition relative">
        <div>
          <h3 class="text-gray-500 text-sm">New Messages</h3>
          <p id="newMessages" class="text-3xl font-bold text-indigo-600">0</p>
        </div>
        <i data-lucide="mail" class="w-8 h-8 text-indigo-600"></i>
        <span id="newMsgBadge" class="absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full hidden">0</span>
      </div>
    </div>

    <!-- âš¡ Quick Actions -->
    <div class="bg-white shadow rounded-xl p-6 mb-8">
      <h3 class="text-gray-700 font-semibold mb-4 flex items-center gap-2">
        <i data-lucide="zap" class="w-5 h-5 text-indigo-600"></i> Quick Actions
      </h3>
      <div class="flex flex-wrap gap-4">
        <a href="manage-users.html" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition">Manage Users</a>
        <a href="manage-listings.html" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition">Manage Listings</a>
        <a href="approve-listing.html" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">Approve Listings</a>
        <a href="resolve-reports.html" class="bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition">Resolve Reports</a>
        <a href="send-notification.html" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">Send Notification</a>
      </div>
    </div>

    <!-- ðŸ•“ Recent Activity -->
    <div class="bg-white shadow rounded-xl p-6 mb-8">
      <h3 class="text-gray-700 font-semibold mb-4 flex items-center gap-2">
        <i data-lucide="clock" class="w-5 h-5 text-indigo-600"></i> Recent Activity
      </h3>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-100">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Date</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">User</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Activity</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Status</th>
              <th class="px-6 py-3 text-center text-xs font-medium text-gray-600 uppercase">Actions</th>
            </tr>
          </thead>
          <tbody id="recentActivity" class="bg-white divide-y divide-gray-200 text-sm">
            <tr><td colspan="5" class="text-center py-4 text-gray-500">Loading activity...</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <!-- âš™ï¸ Footer -->
  <footer class="bg-gray-100 shadow mt-auto">
    <div class="max-w-7xl mx-auto px-6 py-4 text-center text-gray-500 text-sm">
      Â© 2025 Campus Marketplace. All rights reserved.
    </div>
  </footer>

  <!-- ðŸš€ Script -->
  <script>
document.addEventListener("DOMContentLoaded", () => {
  lucide.createIcons();

  const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser"));
  if (!loggedInUser || !loggedInUser.isAdmin) {
    alert("âš ï¸ Access denied! Admins only.");
    window.location.href = "login.html";
    return;
  }

  const demoActivities = [
    { date: "Nov 12, 2025", user: "John Doe", activity: "Added a new listing", status: "Pending" },
    { date: "Nov 11, 2025", user: "Sarah Smith", activity: "Reported a listing", status: "Pending" },
    { date: "Nov 10, 2025", user: "Michael Lee", activity: "Deleted a listing", status: "Deleted" },
    { date: "Nov 9, 2025", user: "Priya Mehta", activity: "Updated profile", status: "Success" },
  ];

  function renderDemoStats() {
    document.getElementById("totalUsers").textContent = 1204;
    document.getElementById("activeListings").textContent = 342;
    document.getElementById("pendingReports").textContent = 7;
    document.getElementById("newMessages").textContent = 15;
    document.getElementById("newMsgBadge").classList.remove("hidden");
    document.getElementById("newMsgBadge").textContent = "3";
  }

  function renderRecentActivity() {
    const tbody = document.getElementById("recentActivity");
    tbody.innerHTML = "";
    demoActivities.forEach((item, index) => {
      const row = document.createElement("tr");
      row.className = "hover:bg-gray-50 transition-all";
      row.innerHTML = `
        <td class="px-6 py-4 text-sm text-gray-700">${item.date}</td>
        <td class="px-6 py-4 text-sm text-gray-700">${item.user}</td>
        <td class="px-6 py-4 text-sm text-gray-700">${item.activity}</td>
        <td class="px-6 py-4 text-sm font-semibold ${
          item.status === "Success"
            ? "text-green-600"
            : item.status === "Pending"
            ? "text-orange-500"
            : "text-red-500"
        }">${item.status}</td>
        <td class="px-6 py-4 text-center">
          <button class="approveBtn bg-green-600 text-white px-2 py-1 rounded text-xs hover:bg-green-700" data-index="${index}">Approve</button>
          <button class="deleteBtn bg-red-500 text-white px-2 py-1 rounded text-xs hover:bg-red-600" data-index="${index}">Delete</button>
          <button class="resolveBtn bg-yellow-500 text-white px-2 py-1 rounded text-xs hover:bg-yellow-600" data-index="${index}">Resolve</button>
        </td>
      `;
      tbody.appendChild(row);
    });

    // Attach event listeners
    document.querySelectorAll(".approveBtn").forEach(btn => {
      btn.addEventListener("click", (e) => {
        const idx = e.target.dataset.index;
        if (confirm("Approve this listing?")) {
          demoActivities[idx].status = "Success";
          alert("âœ… Listing approved successfully!");
          renderRecentActivity();
        }
      });
    });

    document.querySelectorAll(".deleteBtn").forEach(btn => {
      btn.addEventListener("click", (e) => {
        const idx = e.target.dataset.index;
        if (confirm("Delete this record?")) {
          demoActivities.splice(idx, 1);
          alert("ðŸ—‘ï¸ Record deleted!");
          renderRecentActivity();
        }
      });
    });

    document.querySelectorAll(".resolveBtn").forEach(btn => {
      btn.addEventListener("click", (e) => {
        const idx = e.target.dataset.index;
        if (confirm("Mark this issue as resolved?")) {
          demoActivities[idx].status = "Resolved";
          alert("âš¡ Report marked as resolved!");
          renderRecentActivity();
        }
      });
    });
  }

  // ðŸ§¹ Logout
  document.getElementById("logoutBtn").addEventListener("click", () => {
    localStorage.clear();
    alert("Logged out successfully!");
    window.location.href = "login.html";
  });

  // Render everything
  renderDemoStats();
  renderRecentActivity();
});
</script>

</body>
</html>
