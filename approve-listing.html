<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Approve Listings â€“ Admin</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans min-h-screen">

  <!-- Header -->
  <header class="bg-indigo-600 text-white p-4 shadow flex justify-between items-center">
    <h1 class="text-xl font-bold">Approve Listings</h1>
    <a href="admin.html" class="bg-white text-indigo-600 px-3 py-1 rounded hover:bg-gray-100">Back to Dashboard</a>
  </header>

  <main class="max-w-6xl mx-auto p-6">

    <!-- Search Bar -->
    <div class="mb-4">
      <input type="text" id="searchInput" placeholder="Search by Product or Seller..." class="w-full p-2 border rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
    </div>

    <!-- Table -->
    <div class="overflow-x-auto">
      <table id="listingsTable" class="min-w-full divide-y divide-gray-200 bg-white shadow rounded-lg overflow-hidden">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-6 py-3 text-left text-sm font-medium text-gray-600">Listing ID</th>
            <th class="px-6 py-3 text-left text-sm font-medium text-gray-600">Seller</th>
            <th class="px-6 py-3 text-left text-sm font-medium text-gray-600">Product</th>
            <th class="px-6 py-3 text-left text-sm font-medium text-gray-600">Status</th>
            <th class="px-6 py-3 text-left text-sm font-medium text-gray-600">Action</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          <tr class="hover:bg-gray-50">
            <td class="px-6 py-4 text-sm">101</td>
            <td class="px-6 py-4 text-sm">John Doe</td>
            <td class="px-6 py-4 text-sm">Laptop Bag</td>
            <td class="px-6 py-4 text-sm">
              <span class="status-badge bg-yellow-200 text-yellow-800 px-2 py-1 rounded-full text-xs font-semibold">Pending</span>
            </td>
            <td class="px-6 py-4 text-sm flex gap-2">
              <button class="approve bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600">Approve</button>
              <button class="reject bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600">Reject</button>
            </td>
          </tr>
          <tr class="hover:bg-gray-50">
            <td class="px-6 py-4 text-sm">102</td>
            <td class="px-6 py-4 text-sm">Sarah Smith</td>
            <td class="px-6 py-4 text-sm">Wireless Mouse</td>
            <td class="px-6 py-4 text-sm">
              <span class="status-badge bg-yellow-200 text-yellow-800 px-2 py-1 rounded-full text-xs font-semibold">Pending</span>
            </td>
            <td class="px-6 py-4 text-sm flex gap-2">
              <button class="approve bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600">Approve</button>
              <button class="reject bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600">Reject</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>

  <!-- Modal -->
  <div id="confirmModal" class="fixed inset-0 bg-black bg-opacity-50 hidden justify-center items-center z-50">
    <div class="bg-white rounded-lg p-6 w-96 text-center shadow-lg">
      <p id="modalText" class="mb-4 text-gray-700 text-lg"></p>
      <div class="flex justify-center gap-4">
        <button id="modalConfirm" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Yes</button>
        <button id="modalCancel" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="fixed bottom-4 right-4 bg-gray-800 text-white px-4 py-2 rounded shadow-lg opacity-0 transition-opacity"></div>

  <script>
    const table = document.getElementById('listingsTable');
    const modal = document.getElementById('confirmModal');
    const modalText = document.getElementById('modalText');
    const modalConfirm = document.getElementById('modalConfirm');
    const modalCancel = document.getElementById('modalCancel');
    const toast = document.getElementById('toast');
    let selectedRow, actionType;

    // Search Filter
    const searchInput = document.getElementById('searchInput');
    searchInput.addEventListener('input', () => {
      const filter = searchInput.value.toLowerCase();
      [...table.tBodies[0].rows].forEach(row => {
        const seller = row.cells[1].textContent.toLowerCase();
        const product = row.cells[2].textContent.toLowerCase();
        row.style.display = (seller.includes(filter) || product.includes(filter)) ? '' : 'none';
      });
    });

    // Show Modal on Approve/Reject
    table.addEventListener('click', (e) => {
      if(e.target.classList.contains('approve') || e.target.classList.contains('reject')) {
        selectedRow = e.target.closest('tr');
        actionType = e.target.classList.contains('approve') ? 'approve' : 'reject';
        modalText.textContent = `Are you sure you want to ${actionType} this listing?`;
        modal.classList.remove('hidden');
      }
    });

    // Modal Confirm
    modalConfirm.addEventListener('click', () => {
      const badge = selectedRow.querySelector('.status-badge');
      if(actionType === 'approve') {
        badge.textContent = 'Approved';
        badge.classList.remove('bg-yellow-200','text-yellow-800');
        badge.classList.add('bg-green-200','text-green-800');
        showToast('Listing approved!');
      } else {
        badge.textContent = 'Rejected';
        badge.classList.remove('bg-yellow-200','text-yellow-800');
        badge.classList.add('bg-red-200','text-red-800');
        showToast('Listing rejected!');
      }
      modal.classList.add('hidden');
    });

    // Modal Cancel
    modalCancel.addEventListener('click', () => {
      modal.classList.add('hidden');
    });

    // Toast function
    function showToast(message) {
      toast.textContent = message;
      toast.style.opacity = 1;
      setTimeout(() => { toast.style.opacity = 0; }, 2000);
    }
  </script>
</body>
</html>
